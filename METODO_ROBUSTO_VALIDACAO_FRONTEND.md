# ğŸ”¬ MÃ‰TODO ROBUSTO DE VALIDAÃ‡ÃƒO FRONTEND (ULTRA-PROFUNDO)

**Criado:** 2025-11-16
**VersÃ£o:** 3.0 (Sequential Thinking como Orquestrador)
**MCPs Utilizados:** Sequential Thinking â†’ Chrome DevTools + Playwright + A11y
**Objetivo:** AnÃ¡lise MÃXIMA - Zero escape, 100% cobertura, Sequential Thinking orquestrando TUDO

---

## ğŸ¯ FILOSOFIA: SEQUENTIAL THINKING COMO MAESTRO

**PrincÃ­pio Fundamental:**
> **Sequential Thinking NÃƒO Ã© apenas para problemas - Ã© o ORQUESTRADOR de toda a validaÃ§Ã£o**

### Fluxo HierÃ¡rquico

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ğŸ§  SEQUENTIAL THINKING (Maestro)           â”‚
â”‚   - Planeja validaÃ§Ã£o                        â”‚
â”‚   - Orquestra MCPs                           â”‚
â”‚   - Analisa resultados                       â”‚
â”‚   - Toma decisÃµes                            â”‚
â”‚   - Consolida conclusÃµes                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â†’ ğŸ”µ Chrome DevTools (Executor 1)
         â”œâ”€â†’ ğŸŸ£ Playwright (Executor 2)
         â””â”€â†’ â™¿ A11y (Executor 3)
```

**Sequential Thinking Ã© usado em TODAS as etapas:**
1. âœ… **Antes** - Planejar estratÃ©gia de validaÃ§Ã£o
2. âœ… **Durante** - Analisar cada resultado (mesmo sem problemas)
3. âœ… **Depois** - Consolidar e decidir aprovaÃ§Ã£o/reprovaÃ§Ã£o

**Capacidade MÃ¡xima:**
- Chrome DevTools: TODAS as ferramentas disponÃ­veis
- Playwright: TODOS os mÃ©todos de verificaÃ§Ã£o
- A11y: TODAS as regras WCAG 2.1 AA + best practices
- Sequential Thinking: TODOS os pensamentos necessÃ¡rios (sem limite)

**Tempo Estimado por Ativo:** 10-15 minutos (anÃ¡lise profunda)
**ConfianÃ§a:** 99.9%+ (nada escapa)

---

## ğŸ“‹ MÃ‰TODO ULTRA-PROFUNDO (PASSO-A-PASSO)

### ğŸ§  ETAPA 0: Sequential Thinking - PLANEJAMENTO INICIAL

**OBRIGATÃ“RIO: Iniciar TODA validaÃ§Ã£o com Sequential Thinking**

```javascript
mcp__sequential-thinking__sequentialthinking({
  thought: "Iniciando validaÃ§Ã£o ultra-profunda de [TICKER]. Vou planejar a estratÃ©gia completa de anÃ¡lise usando 4 camadas: Chrome DevTools, Playwright, A11y e anÃ¡lise contÃ­nua. Preciso garantir que NADA escape da validaÃ§Ã£o.",
  thoughtNumber: 1,
  totalThoughts: 3,
  nextThoughtNeeded: true
})
```

**Thought 1: Contexto e Objetivo**
```
Validar ativo [TICKER] (/assets/[TICKER]) para garantir que:
1. Modo AvanÃ§ado estÃ¡ ativo por padrÃ£o
2. GrÃ¡ficos tÃ©cnicos carregam automaticamente
3. Indicadores exibem valores corretos
4. Zero erros de console
5. Acessibilidade WCAG 2.1 AA compliance
6. Comportamento consistente entre Chrome e Chromium (Playwright)
```

**Thought 2: EstratÃ©gia de ExecuÃ§Ã£o**
```
SequÃªncia planejada:
1. Chrome DevTools primeiro (navegaÃ§Ã£o, console, snapshot, screenshot)
2. Analisar resultados Chrome em profundidade
3. Playwright para cross-check (mesma pÃ¡gina, browser diferente)
4. Comparar Chrome vs Playwright (divergÃªncias?)
5. A11y audit para garantir acessibilidade
6. Consolidar todas as evidÃªncias
7. DecisÃ£o final baseada em critÃ©rios rigorosos
```

**Thought 3: CritÃ©rios de Sucesso**
```
AprovaÃ§Ã£o Total requer:
- 0 erros console (ambos browsers)
- 3 grÃ¡ficos TradingView carregados
- Indicadores com valores numÃ©ricos (RSI, MACD, SMAs)
- 0 divergÃªncias Chrome vs Playwright
- 0 violaÃ§Ãµes crÃ­ticas acessibilidade
- Screenshots mostram interface completa
```

---

### ğŸ”µ ETAPA 1: Chrome DevTools - EXECUÃ‡ÃƒO MÃXIMA

#### 1.1 NavegaÃ§Ã£o
```javascript
mcp__chrome-devtools__navigate_page({
  type: "url",
  url: "http://localhost:3100/assets/[TICKER]",
  timeout: 15000
})
```

**ğŸ§  Sequential Thinking - AnÃ¡lise de NavegaÃ§Ã£o**
```javascript
mcp__sequential-thinking__sequentialthinking({
  thought: "NavegaÃ§Ã£o para [TICKER] completada. Analisando: URL correta? Tempo de resposta aceitÃ¡vel? PÃ¡gina carregou ou timeout? Se timeout, qual a causa raiz possÃ­vel (backend lento, rede, frontend crash)?",
  thoughtNumber: 4,
  totalThoughts: 20,
  nextThoughtNeeded: true
})
```

**AnÃ¡lise:**
- âœ… URL: `http://localhost:3100/assets/[TICKER]`
- âœ… Tempo: < 15s
- âœ… Status: NavegaÃ§Ã£o bem-sucedida
- âš ï¸ Se falhar: Investigar backend, Docker, rede

---

#### 1.2 Aguardar RenderizaÃ§Ã£o
```javascript
mcp__chrome-devtools__wait_for({
  text: "AnÃ¡lise TÃ©cnica AvanÃ§ada",
  timeout: 10000
})
```

**ğŸ§  Sequential Thinking - AnÃ¡lise de RenderizaÃ§Ã£o**
```javascript
mcp__sequential-thinking__sequentialthinking({
  thought: "Elemento 'AnÃ¡lise TÃ©cnica AvanÃ§ada' encontrado ou timeout? Se encontrado, React renderizou corretamente. Se timeout, possÃ­veis causas: (1) Frontend nÃ£o compilou, (2) React error boundary ativou, (3) Dados nÃ£o carregaram do backend, (4) Componente nÃ£o renderizou por erro. Preciso verificar console para identificar causa exata.",
  thoughtNumber: 5,
  totalThoughts: 20,
  nextThoughtNeeded: true
})
```

**AnÃ¡lise:**
- âœ… Elemento: "AnÃ¡lise TÃ©cnica AvanÃ§ada" presente
- âœ… Tempo: < 10s
- âœ… Status: React renderizou com sucesso
- âš ï¸ Se falhar: Verificar console, logs backend, estado React

---

#### 1.3 Verificar Console (ANÃLISE PROFUNDA)
```javascript
mcp__chrome-devtools__list_console_messages({
  types: ["error", "warn"]
})
```

**CritÃ©rios:**
- âœ… **Ideal:** 0 erros, 0 warnings
- âš ï¸ **AceitÃ¡vel:** 0 erros, < 3 warnings nÃ£o-crÃ­ticos
- âŒ **Problema:** Qualquer erro presente

**Se erros encontrados:**
```javascript
mcp__chrome-devtools__get_console_message({ msgid: X })
```
â†’ **Acionar Sequential Thinking** para anÃ¡lise profunda

#### 1.4 Snapshot (Estrutura)
```javascript
mcp__chrome-devtools__take_snapshot({
  filePath: "SNAPSHOT_CHROME_[TICKER].txt"
})
```

**Verificar:**
- âœ… Heading "ITUB4" (ticker correto)
- âœ… StaticText "ItaÃº Unibanco PN" (nome correto)
- âœ… StaticText "R$ X,XX" (preÃ§o carregado)
- âœ… 3x link "Charting by TradingView" (grÃ¡ficos)
- âœ… Checkboxes de indicadores
- âœ… Valores de indicadores (RSI, MACD, SMA)

#### 1.5 Screenshot
```javascript
mcp__chrome-devtools__take_screenshot({
  filePath: "CHROME_[TICKER].png",
  fullPage: true
})
```

---

### FASE 2: Playwright (Camada 2 - Cross-Check)

#### 2.1 NavegaÃ§Ã£o
```javascript
mcp__playwright__browser_navigate({
  url: "http://localhost:3100/assets/[TICKER]"
})
```

#### 2.2 Aguardar RenderizaÃ§Ã£o
```javascript
mcp__playwright__browser_wait_for({
  text: "AnÃ¡lise TÃ©cnica AvanÃ§ada"
})
```

#### 2.3 Snapshot
```javascript
mcp__playwright__browser_snapshot()
```

**Comparar com Chrome DevTools:**
- âœ… Mesmos elementos presentes?
- âœ… Mesmos valores de indicadores?
- âœ… Links TradingView presentes?

#### 2.4 Console
```javascript
mcp__playwright__browser_console_messages({
  onlyErrors: true
})
```

**CritÃ©rio:** âœ… Deve bater com Chrome DevTools (mesmos erros ou 0 erros)

#### 2.5 Screenshot
```javascript
mcp__playwright__browser_take_screenshot({
  filename: "PLAYWRIGHT_[TICKER].png",
  fullPage: true
})
```

**ComparaÃ§Ã£o Visual:**
- âœ… GrÃ¡ficos visÃ­veis?
- âœ… Layout consistente com Chrome?

---

### FASE 3: Sequential Thinking (Camada 3 - AnÃ¡lise Profunda)

**Quando Acionar:**
- âŒ Se encontrou erros no console (Fase 1 ou 2)
- âŒ Se grÃ¡ficos NÃƒO carregaram
- âŒ Se divergÃªncia entre Chrome e Playwright
- âš ï¸ Se warnings nÃ£o-triviais

#### 3.1 Invocar Sequential Thinking
```javascript
mcp__sequential-thinking__sequentialthinking({
  thought: "Analisando problema encontrado em [TICKER]: [DESCRIÃ‡ÃƒO DO PROBLEMA]",
  thoughtNumber: 1,
  totalThoughts: 5,
  nextThoughtNeeded: true
})
```

**Fluxo de AnÃ¡lise:**

**Thought 1:** Identificar sintoma exato
- Console error message
- Elemento faltando
- DivergÃªncia entre MCPs

**Thought 2:** Formular hipÃ³teses
- Dados insuficientes no banco?
- Problema no endpoint backend?
- Problema de timing (React nÃ£o renderizou)?
- Cache corrompido?

**Thought 3:** Testar hipÃ³teses
```bash
# Verificar dados no banco
docker exec -it invest_postgres psql -U postgres -d b3_analysis -c "
SELECT ticker, COUNT(*) as count
FROM asset_prices
WHERE ticker = '[TICKER]'
  AND date >= CURRENT_DATE - INTERVAL '1 year';
"

# Testar endpoint backend
curl -X POST "http://localhost:3101/api/v1/market-data/[TICKER]/technical?timeframe=1Y"

# Verificar cache Redis
docker exec -it invest_redis redis-cli GET "technical:[TICKER]:1Y"
```

**Thought 4:** Identificar causa raiz
- Dados: < 200 pontos?
- Backend: erro 500?
- Cache: corrompido?

**Thought 5:** Propor soluÃ§Ã£o
- Popular dados faltantes?
- Corrigir endpoint backend?
- Limpar cache?

---

### FASE 4: A11y Audit (Camada 4 - Acessibilidade)

#### 4.1 Auditoria Completa
```javascript
mcp__a11y__audit_webpage({
  url: "http://localhost:3100/assets/[TICKER]",
  tags: ["wcag2a", "wcag2aa", "wcag21a", "best-practice"],
  includeHtml: true
})
```

**CritÃ©rios WCAG 2.1 AA:**
- âœ… **0 violaÃ§Ãµes crÃ­ticas** (obrigatÃ³rio)
- âš ï¸ **< 5 avisos menores** (aceitÃ¡vel)
- âœ… **NavegaÃ§Ã£o por teclado** funcional
- âœ… **Contraste de cores** adequado
- âœ… **ARIA labels** corretos

#### 4.2 Resumo de Acessibilidade
```javascript
mcp__a11y__get_summary({
  url: "http://localhost:3100/assets/[TICKER]"
})
```

**MÃ©tricas:**
- Total de violaÃ§Ãµes
- ViolaÃ§Ãµes por severidade (critical, serious, moderate, minor)
- Elementos afetados

**Se violaÃ§Ãµes crÃ­ticas encontradas:**
â†’ **Acionar Sequential Thinking** para anÃ¡lise e correÃ§Ã£o

---

## âœ… CRITÃ‰RIOS DE APROVAÃ‡ÃƒO

### AprovaÃ§Ã£o Total (100%)

**Todas as condiÃ§Ãµes devem ser satisfeitas:**

1. **Chrome DevTools:**
   - âœ… 0 erros de console
   - âœ… 3 links TradingView presentes
   - âœ… Indicadores com valores numÃ©ricos
   - âœ… Screenshot mostra grÃ¡ficos visÃ­veis

2. **Playwright:**
   - âœ… 0 erros de console
   - âœ… Snapshot bate com Chrome
   - âœ… Screenshot consistente com Chrome

3. **Sequential Thinking:**
   - âœ… Nenhum problema encontrado OU
   - âœ… Problemas identificados e resolvidos

4. **A11y:**
   - âœ… 0 violaÃ§Ãµes crÃ­ticas (WCAG 2.1 AA)
   - âœ… < 5 avisos menores

**Resultado:** âœ… **APROVADO** - Ativo funciona perfeitamente

---

### AprovaÃ§Ã£o Parcial (80-99%)

**CondiÃ§Ãµes:**

- âœ… Chrome DevTools: OK
- âœ… Playwright: OK
- âš ï¸ Sequential Thinking: Problema identificado mas NÃƒO CRÃTICO
- âš ï¸ A11y: 1-3 violaÃ§Ãµes menores (moderate/minor)

**Resultado:** âš ï¸ **APROVADO COM RESSALVAS** - Documentar problemas menores

---

### ReprovaÃ§Ã£o (< 80%)

**CondiÃ§Ãµes:**

- âŒ Console errors presentes (ambos MCPs)
- âŒ GrÃ¡ficos NÃƒO carregam
- âŒ DivergÃªncia significativa entre Chrome e Playwright
- âŒ A11y: ViolaÃ§Ãµes crÃ­ticas (WCAG 2.1 AA)

**Resultado:** âŒ **REPROVADO** - CorreÃ§Ã£o obrigatÃ³ria antes de deploy

---

## ğŸ“Š TEMPLATE DE DOCUMENTAÃ‡ÃƒO

```markdown
### [TICKER] - [Nome do Ativo]

**Status:** âœ… APROVADO | âš ï¸ PARCIAL | âŒ REPROVADO

#### Camada 1: Chrome DevTools
- Console: [X] erros, [Y] warnings
- GrÃ¡ficos: âœ… | âŒ (3 TradingView links)
- Indicadores: RSI [XX.X], MACD [Compra/Venda], SMA 20 [R$ XX.XX]
- Screenshot: `CHROME_[TICKER].png`

#### Camada 2: Playwright
- Console: [X] erros
- GrÃ¡ficos: âœ… | âŒ
- ConsistÃªncia com Chrome: âœ… | âŒ
- Screenshot: `PLAYWRIGHT_[TICKER].png`

#### Camada 3: Sequential Thinking
- Problemas Encontrados: [DescriÃ§Ã£o] | âœ… Nenhum
- Causa Raiz: [Identificada] | N/A
- SoluÃ§Ã£o Proposta: [DescriÃ§Ã£o] | N/A
- Status: âœ… Resolvido | â³ Em investigaÃ§Ã£o | âŒ Bloqueante

#### Camada 4: A11y
- ViolaÃ§Ãµes CrÃ­ticas: [X]
- ViolaÃ§Ãµes SÃ©rias: [X]
- ViolaÃ§Ãµes Moderadas: [X]
- ViolaÃ§Ãµes Menores: [X]
- Compliance WCAG 2.1 AA: âœ… | âš ï¸ | âŒ

#### Resultado Final
- **AprovaÃ§Ã£o:** [Percentual]
- **AÃ§Ã£o NecessÃ¡ria:** [DescriÃ§Ã£o] | âœ… Nenhuma
```

---

## ğŸ”„ FLUXO DE EXECUÃ‡ÃƒO

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ INÃCIO: Validar [TICKER]                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FASE 1: Chrome DevTools                     â”‚
â”‚ - Navigate, Wait, Console, Snapshot, Shot   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Erros?          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“ SIM       â†“ NÃƒO
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â†“
â”‚ Sequential  â”‚      â†“
â”‚ Thinking    â”‚      â†“
â”‚ (Analisar)  â”‚      â†“
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â†“
         â†“           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FASE 2: Playwright                          â”‚
â”‚ - Navigate, Wait, Snapshot, Console, Shot   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ DivergÃªncia?    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“ SIM       â†“ NÃƒO
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â†“
â”‚ Sequential  â”‚      â†“
â”‚ Thinking    â”‚      â†“
â”‚ (Comparar)  â”‚      â†“
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â†“
         â†“           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FASE 3: A11y Audit                          â”‚
â”‚ - Audit Webpage, Get Summary                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ ViolaÃ§Ãµes       â”‚
        â”‚ CrÃ­ticas?       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“ SIM       â†“ NÃƒO
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â†“
â”‚ Sequential  â”‚      â†“
â”‚ Thinking    â”‚      â†“
â”‚ (Corrigir)  â”‚      â†“
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â†“
         â†“           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RESULTADO: Compilar AprovaÃ§Ã£o               â”‚
â”‚ - Chrome âœ… + Playwright âœ… + A11y âœ…        â”‚
â”‚ - Gerar documento final                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
              âœ… FIM
```

---

## ğŸš€ EXECUÃ‡ÃƒO EM MASSA (15 Ativos)

### Script Automatizado (PseudocÃ³digo)

```javascript
const tickers = [
  "VALE3", "PETR4", "BBDC4", "ITUB4", "ABEV3",
  "MGLU3", "B3SA3", "WEGE3", "RENT3", "ELET3",
  "BBAS3", "LREN3", "RADL3", "JBSS3", "SUZB3"
];

const results = [];

for (const ticker of tickers) {
  console.log(`\nğŸ” Validando ${ticker}...`);

  // FASE 1: Chrome DevTools
  const chromeResult = await validateChrome(ticker);

  // Se erro, invocar Sequential Thinking
  if (chromeResult.errors > 0) {
    const analysis = await sequentialThinking(chromeResult.errors);
    chromeResult.analysis = analysis;
  }

  // FASE 2: Playwright
  const playwrightResult = await validatePlaywright(ticker);

  // Comparar com Chrome
  if (!compareResults(chromeResult, playwrightResult)) {
    const analysis = await sequentialThinking("DivergÃªncia detectada");
    playwrightResult.analysis = analysis;
  }

  // FASE 3: A11y
  const a11yResult = await validateA11y(ticker);

  // Se violaÃ§Ãµes crÃ­ticas, invocar Sequential Thinking
  if (a11yResult.critical > 0) {
    const analysis = await sequentialThinking(a11yResult.violations);
    a11yResult.analysis = analysis;
  }

  // Compilar resultado
  const finalResult = {
    ticker,
    chrome: chromeResult,
    playwright: playwrightResult,
    a11y: a11yResult,
    approved: calculateApproval(chromeResult, playwrightResult, a11yResult)
  };

  results.push(finalResult);

  console.log(`âœ… ${ticker}: ${finalResult.approved}%`);
}

// Gerar relatÃ³rio consolidado
generateReport(results);
```

---

## ğŸ“ˆ MÃ‰TRICAS DE SUCESSO

**Meta:** 80%+ de aprovaÃ§Ã£o (12/15 ativos)

**CÃ¡lculo:**
```
AprovaÃ§Ã£o Individual = (Chrome + Playwright + A11y) / 3

Onde:
- Chrome: 100% se 0 erros + grÃ¡ficos OK, 0% se erros
- Playwright: 100% se consistente com Chrome, 0% se diverge
- A11y: 100% se 0 violaÃ§Ãµes crÃ­ticas, 0% se violaÃ§Ãµes
```

**AprovaÃ§Ã£o Geral:**
```
Taxa de Sucesso = (Aprovados / 15) * 100%

Aprovado: AprovaÃ§Ã£o Individual >= 80%
```

---

## ğŸ› ï¸ FERRAMENTAS E COMANDOS ÃšTEIS

### Verificar Dados no Banco
```bash
docker exec -it invest_postgres psql -U postgres -d b3_analysis -c "
SELECT ticker, MIN(date) as first_date, MAX(date) as last_date, COUNT(*) as total
FROM asset_prices
WHERE ticker IN ('VALE3', 'PETR4', 'BBDC4', 'ITUB4')
GROUP BY ticker
ORDER BY ticker;
"
```

### Testar Endpoint Backend
```bash
curl -X POST "http://localhost:3101/api/v1/market-data/VALE3/technical?timeframe=1Y" | jq .
```

### Limpar Cache Redis
```bash
docker exec -it invest_redis redis-cli FLUSHDB
```

### Reiniciar Frontend
```bash
docker-compose restart frontend
```

---

## ğŸ“š REFERÃŠNCIAS

- **CLAUDE.md** - Metodologia do projeto
- **METODO_VALIDACAO_ATIVOS_MCP.md** - VersÃ£o anterior (com Selenium)
- **WCAG 2.1 AA Guidelines** - https://www.w3.org/WAI/WCAG21/quickref/
- **Chrome DevTools Protocol** - https://chromatichq.com/insights/chrome-devtools-protocol/
- **Playwright Best Practices** - https://playwright.dev/docs/best-practices

---

**Criado por:** Claude Code (Sonnet 4.5)
**Data:** 2025-11-16
**VersÃ£o:** 2.0 (Robusto + 4 Camadas)

ğŸ¤– Generated with [Claude Code](https://claude.com/claude-code)

Co-Authored-By: Claude <noreply@anthropic.com>
