# =============================================================================
# B3 AI Analysis Platform - Environment Variables
# =============================================================================
# Copy this file to .env and fill in the values
# For Docker: Use service names (postgres, redis) for *_HOST variables
# For local: Use localhost for *_HOST variables

# =============================================================================
# APPLICATION
# =============================================================================
NODE_ENV=development
APP_PORT=3101
PORT=3101
FRONTEND_PORT=3100
APP_URL=http://localhost:3101
FRONTEND_URL=http://localhost:3100

# =============================================================================
# DATABASE - PostgreSQL with TimescaleDB
# =============================================================================
# For Docker: Use DB_HOST=postgres
# For local: Use DB_HOST=localhost
DB_HOST=postgres
DB_PORT=5432
DB_USERNAME=invest_user
DB_PASSWORD=invest_password
DB_DATABASE=invest_db
DB_SYNCHRONIZE=false
DB_LOGGING=true

# PostgreSQL Docker Environment (for docker-compose.yml)
POSTGRES_USER=invest_user
POSTGRES_PASSWORD=invest_password
POSTGRES_DB=invest_db
PGDATA=/var/lib/postgresql/data/pgdata

# =============================================================================
# REDIS - Cache and Queue
# =============================================================================
# For Docker: Use REDIS_HOST=redis
# For local: Use REDIS_HOST=localhost
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=

# Queue Configuration
QUEUE_REDIS_HOST=redis
QUEUE_REDIS_PORT=6379

# JWT Authentication
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRATION=7d
JWT_REFRESH_SECRET=your-super-secret-refresh-key-change-this-in-production
JWT_REFRESH_EXPIRATION=30d

# Google OAuth2
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_CALLBACK_URL=http://localhost:3001/auth/google/callback

# API Keys
BRAPI_API_KEY=mVcy3EFZaBdza27tPQjdC1

# Scraping Credentials
# Opcoes.net.br
OPCOES_USERNAME=312.862.178-06
OPCOES_PASSWORD=Safra998266@#

# Chrome/Chromium for scraping
CHROME_EXECUTABLE_PATH=/usr/bin/chromium-browser
CHROME_HEADLESS=true
CHROME_USER_DATA_DIR=./browser-profiles

# Google credentials for auto-login
GOOGLE_EMAIL=your-google-email@gmail.com
GOOGLE_PASSWORD=your-google-password

# BTG Pactual
BTG_LOGIN_TOKEN=your-btg-token

# XPI
XPI_LOGIN_TOKEN=your-xpi-token

# Rate Limiting
RATE_LIMIT_TTL=60
RATE_LIMIT_MAX_REQUESTS=100

# Queue Configuration
QUEUE_CONCURRENCY=5
QUEUE_RETRY_ATTEMPTS=3
QUEUE_RETRY_DELAY=5000

# =============================================================================
# SCRAPING CONFIGURATION
# =============================================================================
SCRAPING_TIMEOUT=30000
SCRAPING_MAX_RETRIES=3
SCRAPING_CONCURRENT_JOBS=10
SCRAPING_INTERVAL_MINUTES=15

# Scraper Settings (used in docker-compose.yml)
SCRAPER_HEADLESS=true
SCRAPER_CONCURRENT_JOBS=3
SCRAPER_RETRY_ATTEMPTS=3
SCRAPER_TIMEOUT=30000

# API Service Configuration
API_HOST=0.0.0.0
API_PORT=8000

# Data Validation
MIN_DATA_SOURCES=3
DATA_VALIDATION_THRESHOLD=0.05

# AI Configuration
AI_ENABLED=true
AI_DEFAULT_PROVIDER=openai
OPENAI_API_KEY=your-openai-api-key
ANTHROPIC_API_KEY=your-anthropic-api-key

# Logging
LOG_LEVEL=debug
LOG_FILE_PATH=./logs

# Email notifications (optional)
EMAIL_ENABLED=false
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-specific-password

# Telegram notifications (optional)
TELEGRAM_ENABLED=false
TELEGRAM_BOT_TOKEN=your-telegram-bot-token
TELEGRAM_CHAT_ID=your-telegram-chat-id

# Storage
UPLOAD_DIR=./uploads
REPORTS_DIR=./reports
MAX_FILE_SIZE=10485760

# CORS
CORS_ORIGIN=http://localhost:3100
CORS_CREDENTIALS=true

# Security
BCRYPT_ROUNDS=10
SESSION_SECRET=your-session-secret-change-this

# TimescaleDB
TIMESCALE_ENABLED=true
TIMESCALE_RETENTION_DAYS=365

# Cache
CACHE_TTL=300
CACHE_MAX=1000

# Websocket
WS_PORT=3002
WS_PATH=/socket.io

# Monitoring
SENTRY_DSN=
SENTRY_ENVIRONMENT=development

# Feature Flags
FEATURE_REALTIME_UPDATES=true
FEATURE_AI_ANALYSIS=true
FEATURE_PORTFOLIO_IMPORT=true
FEATURE_REPORTS_GENERATION=true

# =============================================================================
# FRONTEND - Next.js Environment Variables
# =============================================================================
# These are prefixed with NEXT_PUBLIC_ to be available in the browser

# API Configuration
NEXT_PUBLIC_API_URL=http://localhost:3101/api
NEXT_PUBLIC_WS_URL=http://localhost:3101
NEXT_PUBLIC_ENV=development

# Google OAuth (Optional)
NEXT_PUBLIC_GOOGLE_CLIENT_ID=

# Google Analytics (Optional)
NEXT_PUBLIC_GA_ID=

# Frontend Feature Flags
NEXT_PUBLIC_ENABLE_AI_ANALYSIS=true
NEXT_PUBLIC_ENABLE_REALTIME_DATA=true
NEXT_PUBLIC_ENABLE_SOCIAL_LOGIN=true

# =============================================================================
# SERVICE ORCHESTRATOR
# =============================================================================
# Orchestrator manages all services (scrapers, scheduler, aggregator, AI)
ORCHESTRATOR_ENABLED=true
ORCHESTRATOR_HEALTH_CHECK_INTERVAL=60

# =============================================================================
# INTEGRATION LAYER
# =============================================================================
# Complete platform integration settings
ENABLE_API_SERVICE=true
ENABLE_ORCHESTRATOR=true
ENABLE_SCHEDULER=true
ENABLE_JOB_PROCESSOR=true

# Service URLs (for inter-service communication)
API_SERVICE_URL=http://api-service:8000
BACKEND_SERVICE_URL=http://backend:3101
FRONTEND_SERVICE_URL=http://frontend:3000

# =============================================================================
# PRODUCTION DEPLOYMENT NOTES
# =============================================================================
# IMPORTANT: Before deploying to production:
#
# 1. SECURITY:
#    - Generate strong JWT_SECRET (min 32 chars): openssl rand -base64 32
#    - Use strong database passwords
#    - Never commit .env file to version control
#    - Add .env to .gitignore
#    - Rotate secrets regularly
#
# 2. SSL/HTTPS:
#    - Configure nginx SSL certificates
#    - Update CORS_ORIGIN with production domain
#    - Enable HTTPS in all URLs
#
# 3. DOCKER:
#    - Use docker-compose up -d --profile production
#    - Configure proper firewall rules
#    - Set up backup strategies for postgres_data and redis_data volumes
#    - Configure monitoring and logging aggregation
#    - Use Docker secrets or HashiCorp Vault for sensitive data
#
# 4. PERFORMANCE:
#    - Adjust resource limits in docker-compose.yml
#    - Configure Redis maxmemory based on available RAM
#    - Set up database connection pooling
#    - Enable TimescaleDB compression policies
#
# 5. MONITORING:
#    - Configure Sentry for error tracking
#    - Set up health check endpoints monitoring
#    - Configure log aggregation (e.g., ELK stack)
#    - Set up metrics collection (e.g., Prometheus + Grafana)
#
# 6. SERVICE INTEGRATION:
#    - Ensure all services can communicate via Docker network
#    - Configure proper service dependencies in docker-compose.yml
#    - Set up load balancing for production scale
#    - Configure auto-restart policies for all services
